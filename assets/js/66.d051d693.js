(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{530:function(a,e,r){"use strict";r.r(e);var s=r(9),t=Object(s.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"linux下磁盘i-o测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#linux下磁盘i-o测试"}},[a._v("#")]),a._v(" Linux下磁盘I/O测试")]),a._v(" "),e("h2",{attrs:{id:"安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("方法一：[推荐] 在Linux系统下通过yum安装，"),e("code",[a._v("yum install -y fio")])])]),a._v(" "),e("li",[e("p",[a._v("方法二：在fio官网下载fio-2.1.10.tar文件，解压后"),e("code",[a._v("./configure、make、make install")])])])]),a._v(" "),e("h2",{attrs:{id:"参数解释"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参数解释"}},[a._v("#")]),a._v(" 参数解释")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("filename=/dev/emcpowerb　支持文件系统或者裸设备，-filename=/dev/sda2或-filename=/dev/sdb\ndirect=1 测试过程绕过机器自带的buffer，使测试结果更真实\nrw=randwread 测试随机读的I/O\nrw=randwrite 测试随机写的I/O\nrw=randrw 测试随机混合写和读的I/O\nrw=read 测试顺序读的I/O\nrw=write 测试顺序写的I/O\nrw=rw 测试顺序混合写和读的I/O\nbs=4k 单次io的块文件大小为4k\nbsrange=512-2048 同上，提定数据块的大小范围\nsize=5g 本次的测试文件大小为5g，以每次4k的io进行测试\nnumjobs=30 本次的测试线程为30\nruntime=1000 测试时间为1000秒，如果不写则一直将5g文件分4k每次写完为止\nioengine=psync io引擎使用pync方式，如果要使用libaio引擎，需要yum install libaio-devel包\nrwmixwrite=30 在混合读写的模式下，写占30%\ngroup_reporting 关于显示结果的，汇总每个进程的信息\n\n此外\nlockmem=1g 只使用1g内存进行测试\nzero_buffers 用0初始化系统buffer\nnrfiles=8 每个进程生成文件的数量\n")])])]),e("h2",{attrs:{id:"fio测试场景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fio测试场景"}},[a._v("#")]),a._v(" fio测试场景")]),a._v(" "),e("blockquote",[e("p",[a._v("/dev/emcpowerb的地址为fdisk -l获得。部分机器为：/dev/sda、/dev/sda1、/dev/sda2、/dev/sda3")])]),a._v(" "),e("ul",[e("li",[a._v("100%随机，100%读， 4K")])]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("fio "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-filename")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/dev/emcpowerb "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-direct")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-iodepth")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-thread")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rw")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("randread "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ioengine")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("psync "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-bs")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("4k "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-size")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("1000G "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-numjobs")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("50")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-runtime")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("180")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-group_reporting")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-name")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("rand_100read_4k\n")])])]),e("ul",[e("li",[a._v("100%随机，100%写， 4K")])]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("fio "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-filename")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/dev/emcpowerb "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-direct")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-iodepth")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-thread")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rw")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("randwrite "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ioengine")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("psync "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-bs")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("4k "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-size")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("1000G "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-numjobs")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("50")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-runtime")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("180")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-group_reporting")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-name")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("rand_100write_4k\n")])])]),e("ul",[e("li",[a._v("100%顺序，100%读 ，4K")])]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("fio "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-filename")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/dev/emcpowerb "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-direct")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-iodepth")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-thread")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rw")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("read "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ioengine")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("psync "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-bs")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("4k "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-size")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("1000G "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-numjobs")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("50")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-runtime")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("180")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-group_reporting")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-name")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("sqe_100read_4k\n")])])]),e("ul",[e("li",[a._v("100%顺序，100%写 ，4K")])]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("fio "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-filename")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/dev/emcpowerb "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-direct")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-iodepth")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-thread")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rw")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("write "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ioengine")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("psync "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-bs")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("4k "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-size")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("1000G "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-numjobs")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("50")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-runtime")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("180")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-group_reporting")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-name")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("sqe_100write_4k\n")])])]),e("ul",[e("li",[a._v("100%随机，70%读，30%写 4K")])]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("fio "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-filename")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/dev/emcpowerb "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-direct")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-iodepth")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-thread")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rw")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("randrw "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rwmixread")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("70")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ioengine")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("psync "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-bs")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("4k "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-size")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("1000G "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-numjobs")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("50")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-runtime")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("180")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-group_reporting")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-name")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("randrw_70read_4k\n")])])]),e("h2",{attrs:{id:"结果说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#结果说明"}},[a._v("#")]),a._v(" 结果说明")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("io=执行了多少M的IO\n\nbw=平均IO带宽\niops=IOPS\nrunt=线程运行时间\nslat=提交延迟\nclat=完成延迟\nlat=响应时间\nbw=带宽\ncpu=利用率\nIO depths=io队列\nIO submit=单个IO提交要提交的IO数\nIO complete=Like the above submit number, but for completions instead.\nIO issued=The number of read/write requests issued, and how many of them were short.\nIO latencies=IO完延迟的分布\n\nio=总共执行了多少size的IO\naggrb=group总带宽\nminb=最小.平均带宽.\nmaxb=最大平均带宽.\nmint=group中线程的最短运行时间.\nmaxt=group中线程的最长运行时间.\n\nios=所有group总共执行的IO数.\nmerge=总共发生的IO合并数.\nticks=Number of ticks we kept the disk busy.\nio_queue=花费在队列上的总共时间.\nutil=磁盘利用率\n")])])])])}),[],!1,null,null,null);e.default=t.exports}}]);